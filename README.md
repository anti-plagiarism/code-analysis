# Антиплагиат система
## Поставленная задача
Реализовать элегантное решение, которое будет оперативно в реальном времени проверять загруженные решения на плагиат с минимальным использованием мощностей.

## Цели разработки
* Минимизировать ручной труд при проверке решений участников на антиплагиат.
* Уменьшить время, требующееся с момента окончания раунда соревнования до официальной публикации его результатов.
* Автоматизировать формирование таблиц и отчетов, помогающих организаторам принять окончательное решение о дисквалификации.
* Минимизировать ручной труд при обработке апелляций участников.

## Документация
### OpenApi
Чтобы прочитать документация к нашему REST сервису Вам необходимо запустить приложение и перейти по ссылке:
1. ```http://localhost:8085/swagger-ui/index.html``` В итоге Вы увидите документация с удобным UI, который генерируется Swagger
2. ```http://localhost:8085/api-docs``` В итоге Вы увидите документация в формате json

## Запуск приложения
### Из IDE
Для запуска приложения из IDE необходимо указать следующие переменные окружения:
1. CPU_THREADS_COUNT для указания количества потоков
2. FILE_TRACKER_PATH для указания пути к директории с файлами решений

### Из командной строки
Для запуска приложения необходимо в корне проекта ввести следующие команды:

#### Создание исполняемого Jar файла
```bash
./gradlew bootJar
```

#### Создание образа
```bash
docker build -t code-analysis:1.0 .
```

#### Запуск приложения с помощью Docker Compose
```bash
docker compose up -d
```

## Загрузка решений
Примеры запросов для загрузки решений в систему (решение прикрепляется в тело запроса файл по ключу "file" (form-data))

```http request
POST http://localhost:8085/v0/solutions?task_id=1&user_id=2&solution_id=3
```
```http request
POST http://localhost:8085/v0/ignore
```

## Получение отчёта
### Пример запроса для получения отчета по всем решениям в формате md или json

```http request
GET http://localhost:8085/v0/reports/md?similarity_threshold_start=95&similarity_threshold_end=100
```
```http request
GET http://localhost:8085/v0/reports/json?similarity_threshold_start=95&similarity_threshold_end=100
```

И необходимо указать фильтры (если какой-то пустой, то учитывается всё существующее)
```json
{
    "tasks": [
      12,
      23,
      34
    ],
    "users": [
      1,
      2,
      3
    ],
    "langs": [
        "CPP",
        "JAVA"
    ]
}
```

### Предоставление задачи и получение отчета схожести решений относительно этой задачи в формате md или json
Решение прикрепляется в тело запроса файл по ключу "file" (form-data).

```http request
POST http://localhost:8085/v0/reports/private/md?task_id=12&user_id=23&solution_id=34
```
```http request
POST http://localhost:8085/v0/reports/private/json?task_id=12&user_id=23&solution_id=34
```